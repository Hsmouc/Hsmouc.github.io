---
layout:     post
title:      c++ primer 2.2
date:       2015-10-15 21:21:08
author:     Hsmouc
summary:    cpp习题解答
categories: cpp
thumbnail:  heart
tags:
 - 欢迎来我的博客
---

- 2.15  
- Which of the following definitions,if any,are invalid?Why?        

{% highlight c %}  
(a) int ival=1.01;  //valid
(b) int &rval=1.01;  //invalid
(c) int &rval2=ival; //valid
(d) int &rval3;  //invalid
{% endhighlight %}

- 2.17
- What does the following code print?      


{% highlight c %}
int i, &ri = i;
i = 5; ri = 10;
std::cout << i << " " << ri << std::endl;
{% endhighlight %}

输出10 10(这玩意叫右值引用，所以说把值赋给了与引用绑定的对象)

- 2.18
- Write code to change the value of a pointer. Write code to change the value to which the pointer points.  

{% highlight c %}
int a=0,b=1;
int *p1=&a,*p2=p1;
p1=b;
*p2=b;
{% endhighlight %}

- 2.20
- What does the following program do?

{% highlight c %}
int i = 42;
int *p1 = &i; *p1 = *p1 * *p1;
{% endhighlight %}
结果是1764 你以为把乘号放在指针符号中间我就不认识啦～

- 2.21
- Explain each of the following definitions. Indicate whether any are illegal and, if so, why.

{% highlight c %}
int i = 0;
(a) double* dp = &i;  //illegal
(b) int *ip = i;  //illegal
(c) int *p = &i;  //legal
{% endhighlight %}  
这个题呢，除了两种例外情况，其他所有指针的类型都要和它指向的类型相匹配哦。

- 2.24
- Why is the initialization of p legal but that of lp illegal?  

{% highlight c %}
int i = 42;
void *p = &i;
long *lp = &i;
{% endhighlight %}
void* 是一个可以指向类型的指针，第二个反正我是不会这么写。

- 2.27
- Which of the following initializations are legal? Explain why.  

{% highlight c %}
int i = -1, &r = 0;         // illegal
int *const p2 = &i2;        // legal
const int i = -1, &r = 0;   // legal
const int *const p3 = &i2;  // legal
const int *p1 = &i2;        // legal
const int &const r2;        // illegal
const int i2 = i, &r = i;   // legal
{% endhighlight %}

- 2.28
- Explain the following definitions. Identify any that are illegal.

{% highlight c %}
int i, *const cp;       // illegal
int *p1, *const p2;     // illegal
const int ic, &r = ic;  // illegal
const int *const p3;    // illegal
const int *p;           // legal
{% endhighlight %}

- 2.30
- For each of the following declarations indicate whether the object being declared has top-level or low-level const.

{% highlight c %}
const int v2 = 0; int v1 = v2;
int *p1 = &v1, &r1 = v1;
const int *p2 = &v2, *const p3 = &i, &r2 = v2;
{% endhighlight %}  

根据定义很容易判断v2是顶层const，p2是底层const，因为p3是一个指向常量的指针(point to const)，它本身又是一个常量，所以说它既是底层const，又是顶层const。

- 2.40
- Write your own version of the Sales_data class.
{% highlight c %}
struct Sales_data{
   std::string bookNo;
   std::string bookName;
   std::string bookPublish;
   std::string ISBN;
   int soldnum=0;
   double revenue=0.0;
   double price = 0.0;

}
{% endhighlight %}

- 2.41
- Use your Sales_data class to rewrite the exercises in § 1.5.1(p. 22), § 1.5.2(p. 24), and § 1.6(p. 25). For now, you should define your Sales_data class in the same file as your main function.
{% highlight c %}
#include<iostream>
#include<string>
using namespace std;
struct Sales_data
{
   std::string bookNo;
   int soldnum;
   double revenue = 0.0;
}

int main()
{
    Sales_data book;
    doublr price;
    std::cin>>book.bookNo>>book.soldnum>>price;
    book.revenue=price*book.soldnum;
    std::cout<<book.bookNo<<" "<<book.soldnum<<" "<<book.revenue<<" "<<price;
    return 0; 
}
{% endhighlight %}  

这个应该在学谭爷爷的c的时候就会了+_+   还有一个
{% highlight c %}
#include <iostream>
#include <string>

struct Sale_data
{
    std::string bookNo;
    unsigned units_sold = 0;
    double revenue = 0.0;
};

int main()
{
    Sale_data book1, book2;
    double price1, price2;
    std::cin >> book1.bookNo >> book1.units_sold >> price1;
    std::cin >> book2.bookNo >> book2.units_sold >> price2;
    book1.revenue = book1.units_sold * price1;
    book2.revenue = book2.units_sold * price2;
    if (book1.bookNo == book2.bookNo)
    {
        unsigned totalCnt = book1.units_sold + book2.units_sold;
        double totalRevenue = book1.revenue + book2.revenue;
        std::cout << book1.bookNo << " " << totalCnt << " " << totalRevenue << " ";
        if (totalCnt != 0)
            std::cout << totalRevenue / totalCnt << std::endl;
        else
            std::cout << "(no sales)" << std::endl;
        return 0;
    }
    else
    {
        std::cerr << "Data must refer to same ISBN" << std::endl;
        return -1;  // indicate failure
    }
}
{% endhighlight %}

这不就是那个书店程序么……

---
应该是还有一个程序的，今天来不及弄了，自定义数据结构其实第一章也提到了一些。这样子关于变量和基本类型的东西基本就搞完了。但是里面还有很多我没能搞明白的东西，《c++ primer》作为一本工具书应该是用来查阅的，写这些例题也算是慢慢把c++重新学一遍吧，加油！






